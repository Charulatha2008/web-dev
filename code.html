<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>To-Do with Clock</title>
  <style>
    :root {
      --card-bg: rgba(255, 255, 255, 0.9);
      --text: #1f2937;
      --muted: #6b7280;
      --primary: #6366f1;
      --primary-600: #5558f0;
      --ring: rgba(99, 102, 241, 0.3);
      --success: #10b981;
      --border: #e5e7eb;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; color: var(--text); }

    body {
      background: 
        radial-gradient(1200px 600px at 80% -200px, #e9e9ff 0%, transparent 60%),
        radial-gradient(900px 500px at -10% -120px, #ffdfe7 0%, transparent 55%),
        url('https://raw.githubusercontent.com/Charulatha2008/web-dev/main/b_g.jpeg') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: flex-end; /* align card to right */
      align-items: flex-start;
      padding: 40px 16px;
      min-height: 100vh;
    }

    .container {
      width: 480px; /* increased width for bigger dialog */
      margin-right: 40px; /* distance from the right edge */
    }

    .clock {
      font-size: 1.7rem;
      text-align: center;
      margin-bottom: 20px;
      color: var(--primary);
      font-weight: bold;
      letter-spacing: 1px;
      text-shadow: 0 0 3px rgba(0,0,0,0.2);
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 20px;
      box-shadow: 0 8px 40px rgba(31, 41, 55, 0.15);
      overflow: hidden;
      backdrop-filter: blur(10px);
      padding-bottom: 20px;
    }

    header {
      padding: 30px 30px 12px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo {
      width: 50px;
      height: 50px;
      display: grid;
      place-items: center;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--primary), #22d3ee);
      color: white;
      font-weight: 800;
      letter-spacing: 0.5px;
      font-size: 1.3rem;
    }

    h1 { font-size: 1.6rem; margin: 0; }
    .sub { color: var(--muted); font-size: 1rem; }

    .add { padding: 0 30px 30px; }
    .row { display: flex; gap: 12px; }

    input[type="text"] {
      flex: 1;
      padding: 16px;
      border-radius: 14px;
      border: 1px solid var(--border);
      font-size: 1.1rem;
      background: #fbfbfe;
      outline: none;
      transition: box-shadow .2s, border-color .2s, background .2s;
    }
    input[type="text"]:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 6px var(--ring);
      background: #fff;
    }

    button.primary {
      padding: 16px 18px;
      border: none;
      border-radius: 14px;
      background: var(--primary);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: transform .05s ease, background .15s ease;
    }
    button.primary:active { transform: translateY(1px); }
    button.primary:hover { background: var(--primary-600); }

    .toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.8);
      gap: 12px;
      flex-wrap: wrap;
    }

    .filters { display: flex; gap: 10px; }
    .filters button {
      border: 1px solid var(--border);
      background: white;
      border-radius: 999px;
      padding: 8px 14px;
      cursor: pointer;
    }
    .filters button.active {
      border-color: var(--primary);
      color: var(--primary);
      box-shadow: 0 0 0 4px var(--ring);
    }

    .muted { color: var(--muted); font-size: 1rem; }

    .clear {
      border: 1px solid var(--border);
      background: white;
      padding: 8px 14px;
      border-radius: 12px;
      cursor: pointer;
    }

    ul#list { list-style: none; margin: 0; padding: 10px; }

    .item {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 12px;
      padding: 12px 14px;
      border-bottom: 1px solid var(--border);
    }
    .item:last-child { border-bottom: none; }

    .checkbox { width: 24px; height: 24px; cursor: pointer; accent-color: var(--success); }

    .title { line-height: 1.5; font-size: 1.1rem; }
    .title.completed { color: var(--muted); text-decoration: line-through; }

    .actions { display: flex; gap: 8px; }
    .iconbtn {
      border: 1px solid var(--border);
      background: white;
      padding: 8px;
      border-radius: 12px;
      cursor: pointer;
    }
    .iconbtn:hover { box-shadow: 0 0 0 4px #00000008; }

    .title-input {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      font-size: 1.1rem;
      outline: none;
    }
    .title-input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px var(--ring); }

    .empty { text-align: center; padding: 36px 16px; color: var(--muted); }

    @media (max-width: 520px) {
      body { justify-content: center; padding: 20px; }
      .container { width: 100%; margin: 0; }
      header { flex-wrap: wrap; }
      .row { flex-direction: column; }
      button.primary { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="clock" id="clock">00:00:00</div>
    <div class="card" role="application" aria-label="To-Do App">
      <header>
        <div class="logo" aria-hidden="true">âœ“</div>
        <div>
          <h1>To-Do</h1>
          <div class="sub">Add, edit, delete, and check off tasks â€” stored locally.</div>
        </div>
      </header>
      <section class="add" aria-label="Add a task">
        <form id="addForm" class="row" autocomplete="off">
          <input id="newTitle" type="text" placeholder="What do you need to do?" aria-label="Task title" required minlength="1" />
          <button class="primary" type="submit" aria-label="Add task">Add</button>
        </form>
      </section>
      <div class="toolbar">
        <div class="filters" role="tablist" aria-label="Filters">
          <button data-filter="all" class="active" role="tab" aria-selected="true">All</button>
          <button data-filter="active" role="tab">Active</button>
          <button data-filter="completed" role="tab">Completed</button>
        </div>
        <div class="muted" id="count">0 items</div>
        <button class="clear" id="clearCompleted">Clear completed</button>
      </div>
      <ul id="list" aria-live="polite"></ul>
      <div id="empty" class="empty" hidden>
        Your list is empty. Add your first task above âœ¨
      </div>
    </div>
  </div>

  <template id="itemTemplate">
    <li class="item">
      <input class="checkbox" type="checkbox" aria-label="Mark complete" />
      <div class="title" role="textbox"></div>
      <div class="actions">
        <button class="iconbtn edit" title="Edit" aria-label="Edit">âœŽ</button>
        <button class="iconbtn delete" title="Delete" aria-label="Delete">ðŸ—‘</button>
      </div>
    </li>
  </template>

  <script>
    function updateClock() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2,'0');
      const m = String(now.getMinutes()).padStart(2,'0');
      const s = String(now.getSeconds()).padStart(2,'0');
      document.getElementById('clock').textContent = `${h}:${m}:${s}`;
    }
    setInterval(updateClock, 1000);
    updateClock();

    const STORAGE_KEY = 'todo.items.v1';
    const state = { items: loadItems(), filter: 'all' };

    const addForm = document.getElementById('addForm');
    const newTitle = document.getElementById('newTitle');
    const list = document.getElementById('list');
    const itemTemplate = document.getElementById('itemTemplate');
    const countEl = document.getElementById('count');
    const emptyEl = document.getElementById('empty');
    const clearCompletedBtn = document.getElementById('clearCompleted');

    render();

    addForm.addEventListener('submit', e => {
      e.preventDefault();
      const title = newTitle.value.trim();
      if (!title) return;
      state.items.push({ id: crypto.randomUUID(), title, completed: false, createdAt: Date.now() });
      newTitle.value = '';
      save();
      render();
      newTitle.focus();
    });

    document.querySelectorAll('.filters button').forEach(btn => {
      btn.addEventListener('click', () => {
        state.filter = btn.dataset.filter;
        document.querySelectorAll('.filters button').forEach(b => b.classList.toggle('active', b === btn));
        btn.setAttribute('aria-selected','true');
        render();
      });
    });

    clearCompletedBtn.addEventListener('click', () => {
      state.items = state.items.filter(i => !i.completed);
      save();
      render();
    });

    function render() {
      list.innerHTML = '';
      const items = getFilteredItems();
      emptyEl.hidden = items.length !== 0;

      for (const item of items) {
        const node = itemTemplate.content.firstElementChild.cloneNode(true);
        const checkbox = node.querySelector('.checkbox');
        const title = node.querySelector('.title');
        const delBtn = node.querySelector('.delete');
        const editBtn = node.querySelector('.edit');

        checkbox.checked = item.completed;
        title.textContent = item.title;
        title.classList.toggle('completed', item.completed);

        checkbox.addEventListener('change', () => {
          item.completed = checkbox.checked;
          save();
          title.classList.toggle('completed', item.completed);
          updateCount();
        });

        delBtn.addEventListener('click', () => {
          const idx = state.items.findIndex(x => x.id === item.id);
          if (idx !== -1) state.items.splice(idx,1);
          save();
          render();
        });

        editBtn.addEventListener('click', () => beginInlineEdit(node,item));
        title.addEventListener('dblclick', () => beginInlineEdit(node,item));

        list.appendChild(node);
      }

      updateCount();
    }

    function updateCount() {
      const remaining = state.items.filter(i=>!i.completed).length;
      const total = state.items.length;
      countEl.textContent = `${remaining} of ${total} remaining`;
    }

    function beginInlineEdit(node,item){
      const titleEl = node.querySelector('.title');
      const actions = node.querySelector('.actions');
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'title-input';
      input.value = item.title;
      input.setAttribute('aria-label','Edit task title');

      titleEl.replaceWith(input);
      input.focus();
      input.selectionStart = input.selectionEnd = input.value.length;

      const finish = commit => {
        if(commit){ 
          const newVal = input.value.trim();
          item.title = newVal || item.title;
          save();
        }
        const newTitle = document.createElement('div');
        newTitle.className='title';
        newTitle.textContent=item.title;
        if(item.completed) newTitle.classList.add('completed');
        newTitle.addEventListener('dblclick',()=>beginInlineEdit(node,item));
        input.replaceWith(newTitle);
        actions.querySelector('.edit').disabled=false;
        updateCount();
      };

      const onKey = e => { if(e.key==='Enter') finish(true); if(e.key==='Escape') finish(false); };
      input.addEventListener('keydown',onKey);
      input.addEventListener('blur',()=>finish(true),{once:true});
      actions.querySelector('.edit').disabled=true;
    }

    function getFilteredItems() {
      if(state.filter==='active') return state.items.filter(i=>!i.completed);
      if(state.filter==='completed') return state.items.filter(i=>i.completed);
      return [...state.items].sort((a,b)=>a.completed-b.completed || a.createdAt-b.createdAt);
    }

    function save(){ localStorage.setItem(STORAGE_KEY,JSON.stringify(state.items)); }
    function loadItems(){ try{return JSON.parse(localStorage.getItem(STORAGE_KEY))||[];}catch{return [];} }

    newTitle.addEventListener('keydown',e=>{ if(e.key==='Enter'&&!e.shiftKey) addForm.dispatchEvent(new Event('submit',{cancelable:true})); });
  </script>
</body>
</html>

